<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>JavaScript Robotics: Piezo API (Johnny-Five)</title>
  <meta property="og:title" content="JavaScript Robotics: Piezo API (Johnny-Five)">
  <meta property="og:url" content="http://johnny-five.io/api/piezo">
    <meta property="og:site_name" content="Johnny-Five">
  <meta property="og:image" content="http://johnny-five.io/img/static/johnny-five-fb.png">
  <meta property="og:description" content="Johnny-Five is the original JavaScript Robotics &amp; IoT Platform. Released by Bocoup in 2012, Johnny-Five is maintained by a community of passionate software developers and hardware engineers. Over 75 developers have made contributions towards building a robust, extensible and composable ecosystem.">

  <meta name="description" content="Johnny-Five is the JavaScript Robotics &amp; IoT Platform , Piezo">
  <meta name="keywords" content="JavaScript, Robotics , Piezo">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="fonts" content="/css/type.css">


  <link rel="stylesheet" href="/css/styles.css?v1">
  <link rel="stylesheet" href="/css/anchor.css?v1">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">

  <script src="/js/fontloader.js" id="fontloader"></script>
  <script src="/js/anchor.js" id="anchor.js"></script>
  <script src="/js/es6-shim.js" id="es6-shim.js"></script>

  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">

</head>
<body>

  <div class="mast">
    <nav class="nav-primary wrapper icon-j5">
            <a href="/">
        <img src="/img/j5-logo.svg" class="j5-icon">
      </a>

      <div class="navlist">
        <a href="/news/">News</a>
        <a href="/api/">API</a>
        <a href="/examples/">Examples</a>
        <a href="/articles/">Articles</a>
        <a href="/platform-support/" class="link-display-full">Platform Support</a>
        <a href="/platform-support/" class="link-display-short">Platforms</a>
      </div>


    </nav>

    <header role="banner" class="banner">
     <h1 class="site-hed"><span>Piezo</span></h1>
    </header>
  </div>

  <main class="central docs">
    <div class="wrap-a wrap-docs list-docs">
      <nav id="api-nav" class="docs-nav api-nav-list api-content-view">
        <h3>Component Classes</h3>
        <ul>
<li><a href="/api/accelerometer/">Accelerometer</a></li>
<li><a href="/api/altimeter/">Altimeter</a></li>
<li><a href="/api/animation/">Animation</a></li>
<li><a href="/api/barometer/">Barometer</a></li>
<li><a href="/api/board/">Board</a></li>
<li><a href="/api/boards/">Boards</a></li>
<li><a href="/api/button/">Button</a></li>
<li><a href="/api/compass/">Compass</a></li>
<li><a href="/api/esc/">ESC</a></li>
<li><a href="/api/escs/">ESCs</a></li>
<li><a href="/api/expander/">Expander</a></li>
<li><a href="/api/fn/">Fn</a></li>
<li><a href="/api/gps/">GPS</a></li>
<li><a href="/api/gyro/">Gyro</a></li>
<li><a href="/api/hygrometer/">Hygrometer</a></li>
<li><a href="/api/imu/">IMU</a></li>
<li><a href="/api/ir.reflect.array/">IR.Reflect.Array</a></li>
<li><a href="/api/joystick/">Joystick</a></li>
<li><a href="/api/keypad/">Keypad</a></li>
<li><a href="/api/lcd/">LCD</a></li>
<li><a href="/api/led/">Led</a></li>
<li><a href="/api/led.digits/">Led.Digits</a></li>
<li><a href="/api/led.matrix/">Led.Matrix</a></li>
<li><a href="/api/led.rgb/">Led.RGB</a></li>
<li><a href="/api/leds/">Leds</a></li>
<li><a href="/api/light/">Light</a></li>
<li><a href="/api/motion/">Motion</a></li>
<li><a href="/api/motor/">Motor</a></li>
<li><a href="/api/motors/">Motors</a></li>
<li><a href="/api/multi/">Multi</a></li>
<li><a href="/api/piezo/">Piezo</a></li>
<li><a href="/api/pin/">Pin</a></li>
<li><a href="/api/proximity/">Proximity</a></li>
<li><a href="/api/relay/">Relay</a></li>
<li><a href="/api/relays/">Relays</a></li>
<li><a href="/api/sensor/">Sensor</a></li>
<li><a href="/api/servo/">Servo</a></li>
<li><a href="/api/servos/">Servos</a></li>
<li><a href="/api/shiftregister/">ShiftRegister</a></li>
<li><a href="/api/stepper/">Stepper</a></li>
<li><a href="/api/switch/">Switch</a></li>
<li><a href="/api/thermometer/">Thermometer</a></li>
</ul>

      </nav>

      <div class="docs-content api-content-view">
        <ul class="api-anchors">
          <li><a href="#parameters">Parameters</a></li>
          <li><a href="#shape">Shape</a></li>
          <li><a href="#component-initialization">Component Initialization</a>
          <li><a href="#usage">Usage</a></li>
          <li><a href="#api">API</a></li>
          <li><a href="#events">Events</a></li>
        </ul>

        <p>The <code>Piezo</code> class constructs objects that represent a single piezo component attached to the physical board.</p>
<h2>Parameters</h2>
<ul>
<li><p><strong>pin</strong> A Number or String address for the Piezo (+) pin (digital):</p>
<pre><code class="language-js">var piezo = new five.Piezo(3);
</code></pre></li>
<li><p><strong>options</strong> An object of property parameters.
<span class="abbreviate-table"></p>
<table>
<thead>
<tr><th>Property</th><th>Type</th><th>Value/Description</th><th>Default</th><th>Required</th></tr>
</thead>
<tbody>
<tr><td>pin</td><td>Number</td><td>Digital Pin.</td><td></td><td>yes</td></tr>
</tbody>
</table>
<p></span></p></li>
</ul>
<h2>Shape</h2>
<table>
<thead>
<tr><th>Property Name</th><th>Description</th><th>Read Only</th></tr>
</thead>
<tbody>
<tr><td><code>board</code></td><td>A reference to the board object the Led is attached to</td><td>No</td></tr>
<tr><td><code>id</code></td><td>A user definable id value. Defaults to null</td><td>No</td></tr>
<tr><td><code>pin</code></td><td>The pin address that the Led is attached to</td><td>No</td></tr>
<tr><td><code>mode</code></td><td>Mode the piezo's pin is set to: output (1).</td><td>Yes</td></tr>
<tr><td><code>isPlaying</code></td><td>Boolean: is the piezo currently playing?</td><td>Yes</td></tr>
</tbody>
</table>
<h2>Component Initialization</h2>
<h4>Basic</h4>
<pre><code class="language-js">new five.Piezo({
  pin: 3
});
</code></pre>
<p><img src="https://raw.githubusercontent.com/rwaldron/johnny-five/master/docs/breadboard/piezo.png" alt="piezo diagram"></p>
<h4>i2C backpack</h4>
<pre><code>  var piezo = new five.Piezo({
    controller: &quot;I2C_BACKPACK&quot;,
    pin: 3
  });
</code></pre>
<p>Firmware: https://github.com/rwaldron/johnny-five/blob/master/firmwares/piezo_i2c_backpack.ino</p>
<h2>Usage</h2>
<pre><code class="language-js">var five = require(&quot;johnny-five&quot;);
var board = new five.Board();

board.on(&quot;ready&quot;, function() {

  // Create a standard `piezo` instance on pin 3
  var piezo = new five.Piezo(3);

  // Plays a song
  piezo.play({
    // song is composed by an array of pairs of notes and beats
    // The first argument is the note (null means &quot;no note&quot;)
    // The second argument is the length of time (beat) of the note (or non-note)
    song: [
      [&quot;C4&quot;, 1 / 4],
      [&quot;D4&quot;, 1 / 4],
      [&quot;F4&quot;, 1 / 4],
      [&quot;D4&quot;, 1 / 4],
      [&quot;A4&quot;, 1 / 4],
      [null, 1 / 4],
      [&quot;A4&quot;, 1],
      [&quot;G4&quot;, 1],
      [null, 1 / 2],
      [&quot;C4&quot;, 1 / 4],
      [&quot;D4&quot;, 1 / 4],
      [&quot;F4&quot;, 1 / 4],
      [&quot;D4&quot;, 1 / 4],
      [&quot;G4&quot;, 1 / 4],
      [null, 1 / 4],
      [&quot;G4&quot;, 1],
      [&quot;F4&quot;, 1],
      [null, 1 / 2]
    ],
    tempo: 100
  });
});
</code></pre>
<h2>API</h2>
<ul>
<li><p><strong>frequency(frequency, duration)</strong> Play tone at <code>frequency</code> (in Hz) for <code>duration</code> milliseconds.</p>
<pre><code class="language-js">piezo.frequency(587, 1000); // Play note d5 for 1 second
</code></pre></li>
<li><p><strong>play(tune, callback)</strong> Play a <code>tune</code> with an optional callback to invoke when the tune is done playing. The <code>tune</code> object contains a <code>song</code> (an array of the notes in the <code>tune</code>) and optional settings (e.g. <code>tempo</code>):</p>
<pre><code class="language-js">piezo.play({
  tempo: 150, // Beats per minute, default 150
  song: [ // An array of notes that comprise the tune
    [ &quot;c4&quot;, 1 ], // Each element is an array in which 
                 // [0] is the note to play and 
                 //[1] is the duration in &quot;beats&quot; (tempo, above)
    [ &quot;e4&quot;, 2 ],
    [ &quot;g4&quot;, 3 ],
    [ null, 4 ] // null indicates &quot;no tone&quot; for the beats indicated
  ]
});
</code></pre>
<p>The notes you can use are defined in <code>lib/piezo.js</code> as <code>Piezo.Notes</code>:</p>
<pre><code class="language-js">Piezo.Notes = {
  &quot;c4&quot;: 262,
  &quot;c#4&quot;: 277,
  &quot;d4&quot;: 294,
  &quot;d#4&quot;: 311,
  &quot;e4&quot;: 330,
  &quot;f4&quot;: 349,
  &quot;f#4&quot;: 370,
  &quot;g4&quot;: 392,
  &quot;g#4&quot;: 415,
  &quot;a4&quot;: 440,
  &quot;a#4&quot;: 466,
  &quot;b4&quot;: 494,
  &quot;c5&quot;: 523,
  &quot;c#5&quot;: 554,
  &quot;d5&quot;: 587,
  &quot;d#5&quot;: 622,
  &quot;e5&quot;: 659,
  &quot;f5&quot;: 698,
  &quot;f#5&quot;: 740,
  &quot;g5&quot;: 784,
  &quot;g#5&quot;: 831,
  &quot;a5&quot;: 880,
  &quot;a#5&quot;: 932,
  &quot;b5&quot;: 988,
  &quot;c6&quot;: 1047
};
</code></pre>
<p>You can also use frequencies directly if you'd like:</p>
<pre><code class="language-js">piezo.play({
  song: [
    [ 698, 1 ], // Play frequency 698 for 1 beat
    [ 831, 2 ] // ...
  ]
});
</code></pre></li>
<li><p><strong>tone(tone, duration)</strong> Play a <code>tone</code> for <code>duration</code> ms. The <code>tone</code> value in this case is a computed duty cycle (in microseconds). This is a lower-level method than <code>frequency</code> (which does the translation from frequency to tone for you). Most of the time you likely want to use <code>frequency</code>.</p></li>
<li><p><strong>noTone</strong> Stop tone playing from Piezo. Will immediately stop playing a tone (<code>digitalWrite</code> the output pin low) and clear any existing queued tone timers.</p></li>
<li><p><strong>off</strong> Alias of <code>noTone</code></p></li>
</ul>
<h2>Events</h2>
<p>Piezo objects are output only and therefore do not emit any events.</p>



        <h2>Examples</h2>
<ul>
<li><a href="/examples/piezo">Piezo</a></li>
<li><a href="/examples/grove-flame-sensor-edison">Intel Edison + Grove - Flame Sensor</a></li>
<li><a href="/examples/grove-gas-mq2-edison">Intel Edison + Grove - Gas (MQ2)</a></li>
<li><a href="/examples/grove-gas-tp401-edison">Intel Edison + Grove - Air quality sensor</a></li>
</ul>

      </div>
    </div>
  </main>

    <div class="bmast">
    <div class="bmast-central">
      <div class="enews-intro">
        <p>Hi! The Johnny-Five community is building new projects every day. We made this newsletter to tell you about what's new, what's good, and what's next for Open Source robotics. Join us in exploring what we can make together.</p>
      </div>

      <div class="enews-signup">
        <!-- Begin MailChimp Signup Form -->
        <div id="mc_embed_signup">
          <form action="//johnny-five.us1.list-manage.com/subscribe/post?u=118da1f399c6a18b75e6972ee&amp;id=b0bf5cc6c2" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
              <div id="mc_embed_signup_scroll">
              <label for="mce-EMAIL">Email Address</label>
              <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Your email address" required>
              <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
              <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_118da1f399c6a18b75e6972ee_b0bf5cc6c2" tabindex="-1" value=""></div>
              <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
              </div>
          </form>
        </div>
        <!--End mc_embed_signup-->
      </div>
    </div>
  </div>

  <a href="https://github.com/rwaldron/johnny-five">
    <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/52760788cde945287fbb584134c4cbc2bc36f904/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" class="fork-me">
  </a>

  <footer>
    <div class="created-at-bocoup">

      <a href="http://bocoup.com">
        <img src="/img/bocoup-bob.png">
      </a>

    </div>
    <div class="social">

      <a href="https://github.com/rwaldron/johnny-five" class="github-icon"><img src="/img/github-icon.png"></a>

      <a href="https://www.youtube.com/results?search_query=nodebots" class="yt-icon"><img src="/img/yt-icon.png"></a>
      <a href="https://twitter.com/rwaldron/lists/nodebotics" class="twitter-icon"><img src="/img/twitter-icon.png"></a>
    </div>
  </footer>
  <script src="/js/platform-data.js"></script>
  <script src="/js/main.js"></script>
  <script src="/js/konami.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-61698621-1', 'auto');
    ga('send', 'pageview');
  </script>


</body>
</html>
