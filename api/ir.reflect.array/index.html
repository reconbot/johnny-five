<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>JavaScript Robotics: IR.Reflect.Array API (Johnny-Five)</title>
  <meta property="og:title" content="JavaScript Robotics: IR.Reflect.Array API (Johnny-Five)">
  <meta property="og:url" content="http://johnny-five.io/api/ir.reflect.array">
    <meta property="og:site_name" content="Johnny-Five">
  <meta property="og:image" content="http://johnny-five.io/img/static/johnny-five-fb.png">
  <meta property="og:description" content="Johnny-Five is the original JavaScript Robotics &amp; IoT Platform. Released by Bocoup in 2012, Johnny-Five is maintained by a community of passionate software developers and hardware engineers. Over 75 developers have made contributions towards building a robust, extensible and composable ecosystem.">

  <meta name="description" content="Johnny-Five is the JavaScript Robotics &amp; IoT Platform , IR.Reflect.Array">
  <meta name="keywords" content="JavaScript, Robotics , IR.Reflect.Array">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="fonts" content="/css/type.css">


  <link rel="stylesheet" href="/css/styles.css?v1">
  <link rel="stylesheet" href="/css/anchor.css?v1">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">

  <script src="/js/fontloader.js" id="fontloader"></script>
  <script src="/js/anchor.js" id="anchor.js"></script>
  <script src="/js/es6-shim.js" id="es6-shim.js"></script>

  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">

</head>
<body>

  <div class="mast">
    <nav class="nav-primary wrapper icon-j5">
            <a href="/">
        <img src="/img/j5-logo.svg" class="j5-icon">
      </a>

      <div class="navlist">
        <a href="/news/">News</a>
        <a href="/api/">API</a>
        <a href="/examples/">Examples</a>
        <a href="/articles/">Articles</a>
        <a href="/platform-support/" class="link-display-full">Platform Support</a>
        <a href="/platform-support/" class="link-display-short">Platforms</a>
      </div>


    </nav>

    <header role="banner" class="banner">
     <h1 class="site-hed"><span>IR.Reflect.Array</span></h1>
    </header>
  </div>

  <main class="central docs">
    <div class="wrap-a wrap-docs list-docs">
      <nav id="api-nav" class="docs-nav api-nav-list api-content-view">
        <h3>Component Classes</h3>
        <ul>
<li><a href="/api/accelerometer/">Accelerometer</a></li>
<li><a href="/api/altimeter/">Altimeter</a></li>
<li><a href="/api/animation/">Animation</a></li>
<li><a href="/api/barometer/">Barometer</a></li>
<li><a href="/api/board/">Board</a></li>
<li><a href="/api/boards/">Boards</a></li>
<li><a href="/api/button/">Button</a></li>
<li><a href="/api/compass/">Compass</a></li>
<li><a href="/api/esc/">ESC</a></li>
<li><a href="/api/escs/">ESCs</a></li>
<li><a href="/api/expander/">Expander</a></li>
<li><a href="/api/fn/">Fn</a></li>
<li><a href="/api/gps/">GPS</a></li>
<li><a href="/api/gyro/">Gyro</a></li>
<li><a href="/api/hygrometer/">Hygrometer</a></li>
<li><a href="/api/imu/">IMU</a></li>
<li><a href="/api/ir.reflect.array/">IR.Reflect.Array</a></li>
<li><a href="/api/joystick/">Joystick</a></li>
<li><a href="/api/keypad/">Keypad</a></li>
<li><a href="/api/lcd/">LCD</a></li>
<li><a href="/api/led/">Led</a></li>
<li><a href="/api/led.digits/">Led.Digits</a></li>
<li><a href="/api/led.matrix/">Led.Matrix</a></li>
<li><a href="/api/led.rgb/">Led.RGB</a></li>
<li><a href="/api/leds/">Leds</a></li>
<li><a href="/api/light/">Light</a></li>
<li><a href="/api/motion/">Motion</a></li>
<li><a href="/api/motor/">Motor</a></li>
<li><a href="/api/motors/">Motors</a></li>
<li><a href="/api/multi/">Multi</a></li>
<li><a href="/api/piezo/">Piezo</a></li>
<li><a href="/api/pin/">Pin</a></li>
<li><a href="/api/proximity/">Proximity</a></li>
<li><a href="/api/relay/">Relay</a></li>
<li><a href="/api/relays/">Relays</a></li>
<li><a href="/api/sensor/">Sensor</a></li>
<li><a href="/api/servo/">Servo</a></li>
<li><a href="/api/servos/">Servos</a></li>
<li><a href="/api/shiftregister/">ShiftRegister</a></li>
<li><a href="/api/stepper/">Stepper</a></li>
<li><a href="/api/switch/">Switch</a></li>
<li><a href="/api/thermometer/">Thermometer</a></li>
</ul>

      </nav>

      <div class="docs-content api-content-view">
        <ul class="api-anchors">
          <li><a href="#parameters">Parameters</a></li>
          <li><a href="#shape">Shape</a></li>
          <li><a href="#component-initialization">Component Initialization</a>
          <li><a href="#usage">Usage</a></li>
          <li><a href="#api">API</a></li>
          <li><a href="#events">Events</a></li>
        </ul>

        <p>The <code>IR.Reflect.Array</code> class constructs an array of analog (digital arrays are not currently supported) reflectance sensors like the <a href="http://www.pololu.com/product/960">QTR-8A</a> from Pololu.</p>
<h2>Parameters</h2>
<ul>
<li><p><strong>pins</strong> An array Numbers or Strings for the analog sensor pins.</p></li>
<li><p><strong>emitter</strong> The pin where the emitter LED is attached.  For these arrays, there is one pin that controls all of the emitters.</p>
<pre><code class="language-js">var eyes = new five.IR.Reflect.Array({
  emitter: 13,
  pins: [&quot;A0&quot;, &quot;A1&quot;, &quot;A2&quot;, &quot;A3&quot;, &quot;A4&quot;, &quot;A5&quot;]
});
</code></pre></li>
<li><p><strong>options</strong> An object of property parameters.
<span class="abbreviate-table"></p>
<table>
<thead>
<tr><th>Property</th><th>Type</th><th>Value/Description</th><th>Default</th><th>Required</th></tr>
</thead>
<tbody>
<tr><td>pins</td><td>Array of Numbers, Strings</td><td><code>[&quot;A*&quot;, ...]</code>. The pins that the sensors are connected to</td><td></td><td>yes</td></tr>
<tr><td>emitter</td><td>Number, String</td><td>Digital Pin. The pin that the light emitter is connected to</td><td></td><td>yes</td></tr>
<tr><td>freq</td><td>Number</td><td>Milliseconds. The frequency in ms of data events.</td><td>25ms</td><td>no</td></tr>
</tbody>
</table>
<p></span></p></li>
</ul>
<h2>Shape</h2>
<table>
<thead>
<tr><th>Property Name</th><th>Description</th><th>Read Only</th></tr>
</thead>
<tbody>
<tr><td><code>id</code></td><td>A user definable id value. Defaults to a generated uid</td><td>No</td></tr>
<tr><td><code>pins</code></td><td>The pin addresses that the sensors are attached to</td><td>No</td></tr>
<tr><td><code>isOn</code></td><td>Are the emitters on?</td><td>Yes</td></tr>
<tr><td><code>isCalibrated</code></td><td>Does the array have calibration data?</td><td>Yes</td></tr>
<tr><td><code>isOnLine</code></td><td>Is the array currently tracking a line? <code>isCalibrated===true</code></td><td>Yes</td></tr>
<tr><td><code>sensors</code></td><td>An array of sensor objects that represent each sensor in the array.</td><td>Yes</td></tr>
<tr><td><code>calibration</code></td><td>The current calibration data.</td><td>Yes</td></tr>
<tr><td><code>raw</code></td><td>An array of raw values from all the sensors.</td><td>Yes</td></tr>
<tr><td><code>values</code></td><td>If calibrated, an array of calibrated values (between 0 and 1000).  If not calibrated, raw data (between 0 and 1023).</td><td>Yes</td></tr>
<tr><td><code>line</code></td><td>If calibrated, a value between 0 and (n-1)*1000+1. For example, 6 sensors will have a line between 0 and 5001.</td><td>Yes</td></tr>
</tbody>
</table>
<h2>Component Initialization</h2>
<h4>Analog</h4>
<pre><code class="language-js">new five.IR.Reflect.Array({
  emitter: 13,
  pins: [&quot;A0&quot;, &quot;A1&quot;, &quot;A2&quot;], // any number of pins
  freq: 25
});
</code></pre>
<h2>Usage</h2>
<pre><code class="language-js">var five = require(&quot;johnny-five&quot;),
    board = new five.Board();

board.on(&quot;ready&quot;, function() {

  // Create a new `reflectance` hardware instance.
  var eyes = new five.IR.Reflect.Array({
    emitter: 13,
    pins: [&quot;A0&quot;, &quot;A1&quot;, &quot;A2&quot;], // any number of pins
    freq: 25
  });

  eyes.on('data', function() {
    console.log( &quot;Raw Values: &quot;, this.raw );
  });

  eyes.on('line', function() {
    console.log( &quot;Line Position: &quot;, this.line);
  });

  eyes.enable();
});
</code></pre>
<h2>API</h2>
<ul>
<li><p><strong>enable()</strong> Turn the light emitters on.</p>
<pre><code class="language-js">var eyes = new five.IR.Reflect.Array({
  emitter: 13,
  pins: [&quot;A0&quot;, &quot;A1&quot;]
});

eyes.enable();
</code></pre></li>
<li><p><strong>disable()</strong> turn the light emitters off</p>
<pre><code class="language-js">var eyes = new five.IR.Reflect.Array({
  emitter: 13,
  pins: [&quot;A0&quot;, &quot;A1&quot;]
});

eyes.disable();
</code></pre></li>
<li><p><strong>calibrate()</strong> Read all of the sensors and store the min/max values.  Used to calculate calibrated values and line values.  You should call <code>calibrate()</code> multiple times.</p>
<pre><code class="language-js">var eyes = new five.IR.Reflect.Array({
  emitter: 13,
  pins: [&quot;A0&quot;, &quot;A1&quot;]
});

for (var i = 0; i &lt; 100; i++) {
  eyes.calibrate();
}
</code></pre></li>
<li><p><strong>calibrateUntil(predicate)</strong> A convenience function that will call calibrate until a predicate function returns true.  This allows you to decide when calibration is done.  This trigger may be user input, time, or execution count.  You decide.</p>
<pre><code class="language-js">var eyes = new five.IR.Reflect.Array({
  emitter: 13,
  pins: [&quot;A0&quot;, &quot;A1&quot;]
});

var calibrating = true;
eyes.calibrateUntil(function() {
  return !calibrating;
});

// calibrate for one second
setTimeout(function() { 
  calibrating = false; 
}, 1000); 
</code></pre></li>
<li><p><strong>loadCalibration(calibration)</strong> Prime the array with calibration data.  This allows you to load calibration data from a file.  You can get it from the device using the <code>calibration</code> after it has been calibrated.</p>
<pre><code class="language-js">var eyes = new five.IR.Reflect.Array({
  emitter: 13,
  pins: [&quot;A0&quot;, &quot;A1&quot;]
});

eyes.loadCalibration({
  min: [37, 39],
  max: [1010, 1015]
});
</code></pre></li>
</ul>
<h2>Events</h2>
<ul>
<li><p><strong>data</strong> The &quot;data&quot; event is fired as frequently as the user defined <code>freq</code> will allow in milliseconds. It includes an array of the RAW data from the sensors.</p></li>
<li><p><strong>calibratedData</strong> The &quot;calibratedData&quot; event is fired as frequently as the user defined <code>freq</code> will allow in milliseconds.  <strong>It also requires that the device has been calibrated</strong>.  It includes an array of calibrated values between 0 and 1000.</p></li>
<li><p><strong>line</strong> The &quot;line&quot; event is fired as frequently as the user defined <code>freq</code> will allow in milliseconds.  <strong>It also requires that the devide has been calibrated</strong>.  It is a single value between 0 and (n-1)*1000+1.  An array with 6 sensors will yield a value between 0 and 5001.</p></li>
</ul>



        0
      </div>
    </div>
  </main>

    <div class="bmast">
    <div class="bmast-central">
      <div class="enews-intro">
        <p>Hi! The Johnny-Five community is building new projects every day. We made this newsletter to tell you about what's new, what's good, and what's next for Open Source robotics. Join us in exploring what we can make together.</p>
      </div>

      <div class="enews-signup">
        <!-- Begin MailChimp Signup Form -->
        <div id="mc_embed_signup">
          <form action="//johnny-five.us1.list-manage.com/subscribe/post?u=118da1f399c6a18b75e6972ee&amp;id=b0bf5cc6c2" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
              <div id="mc_embed_signup_scroll">
              <label for="mce-EMAIL">Email Address</label>
              <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Your email address" required>
              <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
              <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_118da1f399c6a18b75e6972ee_b0bf5cc6c2" tabindex="-1" value=""></div>
              <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
              </div>
          </form>
        </div>
        <!--End mc_embed_signup-->
      </div>
    </div>
  </div>

  <a href="https://github.com/rwaldron/johnny-five">
    <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/52760788cde945287fbb584134c4cbc2bc36f904/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" class="fork-me">
  </a>

  <footer>
    <div class="created-at-bocoup">

      <a href="http://bocoup.com">
        <img src="/img/bocoup-bob.png">
      </a>

    </div>
    <div class="social">

      <a href="https://github.com/rwaldron/johnny-five" class="github-icon"><img src="/img/github-icon.png"></a>

      <a href="https://www.youtube.com/results?search_query=nodebots" class="yt-icon"><img src="/img/yt-icon.png"></a>
      <a href="https://twitter.com/rwaldron/lists/nodebotics" class="twitter-icon"><img src="/img/twitter-icon.png"></a>
    </div>
  </footer>
  <script src="/js/platform-data.js"></script>
  <script src="/js/main.js"></script>
  <script src="/js/konami.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-61698621-1', 'auto');
    ga('send', 'pageview');
  </script>


</body>
</html>
